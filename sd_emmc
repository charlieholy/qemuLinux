QEMU_AUDIO_DRV=none qemu-system-arm \
  -M vexpress-a9 \
  -kernel linux-5.15.50/arch/arm/boot/zImage \
  -dtb linux-5.15.50/arch/arm/boot/dts/vexpress-v2p-ca9.dtb \
  -drive file=busybox/rootfs.ext4,format=raw,id=rootfs,if=sd \
  -drive file=/var/fpwork/emmc.img,format=raw,id=emmc_disk \
  -append "root=/dev/mmcblk0 rw console=ttyAMA0,115200 init=/linuxrc ignore_loglevel" \
  -m 512M \
  -nographic \
  -netdev user,id=net0,hostfwd=tcp:127.0.0.1:2222-:2

# 配置 IP（用户模式默认网段 10.0.2.0/24）
ifconfig eth0 10.0.2.15 netmask 255.255.255.0 up
# 默认网关固定为 10.0.2.2（QEMU 内置 NAT 网关）
route add default gw 10.0.2.2 eth0
# 配置 DNS
echo "nameserver 8.8.8.8" > /etc/resolv.conf
